{# --- تحديد نوع الفاتورة بناءً على buyer_vat_registration_number --- #}
{% set invoice_type = "Simplified" %}
{% if doc.custom_zatca_siaf %}
    {% set buyer_vat = frappe.db.get_value("Sales Invoice Additional Fields", doc.custom_zatca_siaf, "buyer_vat_registration_number") %}
    {% if buyer_vat %}
        {% set invoice_type = "Standard" %}
    {% endif %}
{% endif %}

<div style="font-family: Arial, sans-serif;width:100%;max-width:100%;margin:0 auto;box-sizing:border-box;background:#fff;">
  <div style="text-align:center;font-size:1.6em;font-weight:bold;color:#1e2d3a;margin:8px 0 16px 0;letter-spacing:1px;line-height:1.15;font-family:Cairo,Arial,sans-serif;width:100%;" class="invoice-title-block">
    {% if invoice_type == "Standard" %}
      {% if doc.is_return %}
        <span class="auto-style1">إشعار دائن ضريبي قياسي</span>
      {% elif doc.is_debit_note %}
        <span class="auto-style1">إشعار مدين ضريبي قياسي</span>
      {% else %}
        <span class="auto-style1">فاتورة ضريبية قياسية</span>
      {% endif %}
    {% else %}
      {% if doc.is_return %}
        <span class="auto-style1">إشعار دائن ضريبي مبسط</span>
      {% elif doc.is_debit_note %}
        <span class="auto-style1">إشعار مدين ضريبي مبسط</span>
      {% else %}
        <span class="auto-style1">فاتورة ضريبية مبسطة</span>
      {% endif %}
    {% endif %}
  </div>

  <div style="display:flex;justify-content:space-between;align-items:center;direction:rtl;padding:2px 20px 2px 20px;margin:0 auto 5px auto;line-height:1.2;width:100%;box-sizing:border-box;font-family:Cairo,Arial,sans-serif;">
    <div style="flex:1;font-size:16px;font-weight:bold;color:#333;margin:0;padding:0;text-align:right;line-height:1.2;">
      <span>رقم الفاتورة {{ doc.name }}</span>
    </div>
    <div style="flex:0 0 10px;"></div>
    <div style="flex:1;font-size:16px;font-weight:bold;color:#333;margin:0;padding:0;text-align:left;line-height:1.2;">
      <span>تاريخ الفاتورة {{ doc.get_formatted("posting_date") }}</span>
    </div>
  </div>
</div>

